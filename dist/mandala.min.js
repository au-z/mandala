!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Mandala",[],t):"object"==typeof exports?exports.Mandala=t():e.Mandala=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=function(e){return"Sorry "+e+" is not supported by your browser. :("},t=function(e,t){return"'"+e+"' is not an instance of type '"+t+"'"},n=function(){if("undefined"==typeof Promise&&-1==Promise.toString().indexOf("[native code]"))throw new Error(e("Promise"))},r=function(e){return Array.isArray(e)||!!console.error(t(e,"Array"))},o=function(e){switch(e.toUpperCase()){case"PROMISE":return n();default:throw new Error("Unimplemented feature check: "+e)}},u=function(e,t){switch(t.toUpperCase()){case"ARRAY":return r(e);case"OBJECT":return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e);default:throw new Error("Unimplemented type check: "+t)}},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||!!console.error(t)};return{falsy:a,falsies:function(e){return e.every(function(e,t){return a(e,"Falsy value detected at index "+t)})},empty:function(e,t){return e.length<1&&console.error(t)},feature:o,typeOf:u}}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return"depth_"+e},o=function(){var e="mandala-css",t=function(t){return e=t},n={},o=function(e){var t=document.querySelector("style#"+e);return t||(t=function(e){var t=document.createElement("style");return t.setAttribute("id",e),document.body.appendChild(t),t}(e)),t},u=function(t){o(e).innerHTML+=t};return{injectCss:u,setStyleTitle:t,stylePolygon:function(e,t){var o=e.gon.radius,a=-1*(o-e.parentVertRadius),i="."+e.name+"."+r(e.depth);!n[i]&&u((i+"{\n      width: {0}px;\n      height: {0}px;\n      border-radius: {0}px;\n      margin-left: {1}px;\n      margin-top: {1}px;\n    }\n").format(2*o,a)),n[i]=!0;var c=2*e.vert[0].radius,s="."+e.name+".vert."+r(e.depth);!n[s]&&u((s+"{\n      width: {0}px;\n      height: {0}px;\n      border-radius: {0}px;\n    }\n").format(c)),n[s]=!0}}}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(3),u=(r(o),n(0)),a=r(u),i=n(4),c=r(i);a.default.feature("Promise"),e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.falsy(e,"No configuration provided."),a.default.typeOf(e,"Array"),a.default.typeOf(t,"Object"),t.styleTitle=t.styleTitle||"mandala-css";var n=e.map(function(e){return new c.default(e.uri,null,t)});return{create:function(e){created.push(new c.default(null,e,t))},erase:function(e){var t=document.getElementById("mandala"),n=document.getElementById("mandala_"+e);a.default.falsy(n,"Cannot find mandala with name: "+e),t.removeChild(n)},mandalaEffects:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){String.prototype.format||(String.prototype.format=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==r[t]?r[t]:e})})}();t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),u=r(o),a=n(5),i=n(6),c=n(7),s=n(1),d=r(s);String.prototype.format||(String.prototype.format=function(){return this.replace(/{(\d+)}/g,function(e,t){return void 0!==args[t]?args[t]:e})});var l=function(e,t,n){n.styleTitle&&d.default.setStyleTitle(n.styleTitle);var r=n.debug||!1;if(!e&&!t)throw new Error("No template file or json provided.");var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default.empty(e.nodes,"Template file contains 0 nodes."),u.default.falsies([!0,!0,!0]);var t=l(e);f(t,t[0]);var n=new a.Polygon(t[0],r);p(n,t[0]),s(n,t[0].name)},s=function(e,t){var n=document.getElementById("mandala"),r=document.createElement("div");r.setAttribute("class","mandala-container"),r.setAttribute("id","mandala_"+t),r.appendChild(e),n.appendChild(r)},l=function(e,t){return e.nodes.map(function(t,n){return u.default.falsies([t.gon,t.vert]),{depth:n,gon:(0,i.copy)(e.gon[t.gon]),name:e.name||(0,i.randomName)(5),parentVertRadius:0,vert:(0,i.per)(e.gon[t.gon].vertCount,function(n){return(0,i.copy)(e.vert[t.vert])})}})},f=function e(t,n){return n.vert.forEach(function(r){if(n.depth<t.length-1)return r.child=t[n.depth+1],r.child&&(r.child.parentVertRadius=r.radius),e(t,t[n.depth+1])})},p=function e(t,n){return n.vert.forEach(function(o,u){var i=new a.Vertex(n,o,u,n.vert.length);if(t.appendChild(i),o.child){var c=new a.Polygon(o.child,r);return i.appendChild(c),e(c,o.child)}})},m=e?(0,c.get)(e,c.FileExt.json).then(o):o(t),v=e?(0,c.get)(e,c.FileExt.css).then(d.default.injectCss):function(){};return new Promise(function(e,t){Promise.all([m,v]).then(function(t){e(t[0])})})};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vertex=t.Polygon=void 0;var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){return"depth_"+e},a=function(e){return e?"debug":""},i=function(e,t){var n=document.createElement("div");return n.setAttribute("class","gon "+e.name+" "+u(e.depth)+" "+a(t)),o.default.stylePolygon(e),n},c=function(e,t,n,r){var o=document.createElement("div");o.setAttribute("class","vert "+e.name+" depth_"+e.depth);var u=e.gon.radius,a=t.radius,i=2*Math.PI/r,c=u*Math.sin(n*i)+u-a,s=u*Math.cos(n*i)+u-a;return console.log(c,s),o.style.cssText="left: {0}px; bottom:{1}px; margin: 0;".format(c,s),o};t.Polygon=i,t.Vertex=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return JSON.parse(JSON.stringify(e))},o=function(e){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,e)},u=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t());return n};t.copy=r,t.per=u,t.randomName=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return{json:".json",css:".css"}}(),o=function(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.responseType=".json"===t?"json":"text",o.open("GET",e+t),o.onload=function(){200===o.status&&null!==o.response?n(o.response):r(Error(o.statusText))},o.onerror=function(){return r(Error("Network error"))},o.send()})};t.get=o,t.FileExt=r}])});
//# sourceMappingURL=mandala.min.js.map